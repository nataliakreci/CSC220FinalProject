{% extends "base.html" %}

{% block content %}
    {% if images %}
    <h1>Image</h1>

    <div class="full-img">
      <img class="displayed-img">
    </div>
    Your answer:<br>
  	<input class="input" id="input" type="text" name="input" value="">
  	<br>
	<button class="dark">Next</button>

    <div class="thumb-bar">


    </div>
    <script>
    	var images = {{ images|tojson }};
    	initialize()
    	function initialize() {
			var displayedImage = document.querySelector('.displayed-img');
			var index = Math.floor(Math.random() * images.length);
			var img = images[index]
			displayedImage.setAttribute('src', 'static/'+img.image);
			displayedImage.setAttribute('width', '200');
			displayedImage.setAttribute('height', '200');
			displayedImage.setAttribute('id', img.word);
	
			btn = document.querySelector('button');
			
			var bool = true;
			var timeStart;
			var timeEnd;
			
			document.getElementById("input").addEventListener("click", function() {
				if (bool==true){
					var d = new Date();
					timeStart = d.getTime();
					bool = false;
				}
     		}, false);
	
			btn.onclick= function() {
				var input = document.querySelector('.input');
				if (input.value==displayedImage.id){
					var d= new Date();
					timeEnd = d.getTime();
					alert("Correct. Your time was " + (timeEnd-timeStart));
					var timing= (timeEnd-timeStart)
					window.location.href = "/know/"+img.word+'/'+timing;
					//var index = Math.floor(Math.random() * images.length);
					//var img = images[index]
					//displayedImage.setAttribute('src', 'static/'+img.image);
					//displayedImage.setAttribute('id', img.word);
					//input.value= '';
				}
				else{
					alert("try again");
					window.location.href = "/try/"+img.word;
				}
			}
		}
    </script>
    {% else %}
    <div> You know every word </div>
    {% endif %}
{% endblock %}